<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

</head>

<body class="bg-linear-to-r from-purple-600 to-black h-screen">
    <div class="flex justify-center m-4">
        <nav class="bg-linear-to-r from-orange-100 to-blue-50 w-2xl rounded-xl hover:cursor-pointer">
            <ul class="flex justify-between space-x-16 text-2xl font-bold text-purple-950 p-4">

                <li class="font-serif text-4xl font-bold hover:text-5xl"><a href="/src/Home.html">Create</a></li>
                <li class="font-serif text-4xl font-bold hover:text-5xl"><a href="#Read.html">Read</a></li>
                <li class="font-serif text-4xl font-bold hover:text-5xl"><a href="/src/Update2.html">Update</a></li>
                <li class="font-serif text-4xl font-bold hover:text-5xl"><a href="/src/Delete2.html">Delete</a></li>
            </ul>
        </nav>
    </div>

       <div class="flex justify-center m-20">
            <div class="bg-linear-to-r from-orange-100 to-blue-50 h-80w-6xl flex justify-center rounded-2xl">

        <form class="grid grid-cols-2" onsubmit="todoId(event)">
            <input type="text" id="todoIdInput" placeholder="Todo ID"
                class="border-4 h-16 w-xl m-6 rounded-2xl text-4xl text-purple-950 font-semibold" />
            <button type="submit" class="border-4 h-16 w-xs rounded-2xl text-3xl bg-green-800 cursor-pointer m-6 text-white font-bold font-serif">Get Todo by ID</button>
        </form>
    </div>
       </div>
        <div id="todo-response" class="text-white text-2xl mt-6 font-serif font-bold"></div>


       <script>

        // Get Todoby ID
       async function todoId(event) {
    event.preventDefault();

    const id = document.getElementById('todoIdInput').value.trim();
    const url = `https://api.freeapi.app/api/v1/todos/${id}`;

    try {
        const response = await fetch(url, {
            method: "GET",
            headers: { accept: 'application/json' },
        });
        const data = await response.json();
        const responseContainer = document.getElementById("todo-response");

        if (data.success && data.data) {
            const todoData = {
                _id: data.data._id,
                title: data.data.title,
                description: data.data.description
            };

            localStorage.setItem("todoData", JSON.stringify(todoData));

            responseContainer.innerHTML = `
                <p><strong>Todo ID:</strong> ${data.data._id}</p>
                <p><strong>Title:</strong> ${data.data.title}</p>
                <p><strong>Description:</strong> ${data.data.description}</p>
            `;
        } else {
            responseContainer.innerHTML = `<p>No Todo found with that ID.</p>`;
        }

    } catch (error) {
        console.error("Error by ID:", error);
        const responseContainer = document.getElementById("todo-response");
        responseContainer.innerHTML = `<p>There was an error fetching the todo. Please try again.</p>`;
    }
}

window.onload = function() {
    const savedTodo = JSON.parse(localStorage.getItem("todoData"));
    const responseContainer = document.getElementById("todo-response");

    // if (savedTodo) {
    //     responseContainer.innerHTML = `
    //         <p><strong>Todo ID:</strong> ${savedTodo._id}</p>
    //         <p><strong>Title:</strong> ${savedTodo.title}</p>
    //         <p><strong>Description:</strong> ${savedTodo.description}</p>
    //     `;
    // }
};


       </script>
</body>
</html>